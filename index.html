<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#8B4513">
    <meta name="description" content="Calculateur de score pour Ch√¢teau Combo - Prenez une photo de votre partie pour calculer automatiquement le score">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ch√¢teau Combo">

    <title>Ch√¢teau Combo - Calculateur de Score</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>Ch√¢teau Combo</h1>
            <p class="subtitle">Calculateur de Score</p>
        </header>

        <main>
            <!-- Section Capture Photo -->
            <section id="capture-section" class="card">
                <h2>Prenez une photo de votre partie</h2>
                <div id="camera-container">
                    <video id="camera-preview" autoplay playsinline></video>
                    <canvas id="photo-canvas"></canvas>
                    <img id="captured-photo" alt="Photo captur√©e">
                </div>
                <div class="button-group">
                    <button id="start-camera-btn" class="btn btn-primary">
                        <span class="icon">üì∑</span>
                        Activer la cam√©ra
                    </button>
                    <button id="capture-btn" class="btn btn-primary" disabled>
                        <span class="icon">üì∏</span>
                        Prendre la photo
                    </button>
                    <button id="retake-btn" class="btn btn-secondary" style="display: none;">
                        <span class="icon">üîÑ</span>
                        Reprendre
                    </button>
                    <label for="file-input" class="btn btn-secondary">
                        <span class="icon">üìÅ</span>
                        Importer une image
                    </label>
                    <input type="file" id="file-input" accept="image/*" hidden>
                </div>
            </section>

            <!-- Section Analyse -->
            <section id="analysis-section" class="card" style="display: none;">
                <h2>Analyse en cours...</h2>
                <div id="loading-spinner" class="spinner"></div>
                <p id="analysis-status">D√©tection des √©l√©ments du jeu...</p>
            </section>

            <!-- Section R√©sultats -->
            <section id="results-section" class="card" style="display: none;">
                <h2>R√©sultats</h2>
                <div id="score-breakdown">
                    <!-- Les d√©tails du score seront ajout√©s dynamiquement -->
                </div>
                <div id="total-score">
                    <span class="label">Score Total</span>
                    <span id="score-value" class="value">0</span>
                </div>
                <div class="button-group">
                    <button id="new-scan-btn" class="btn btn-primary">
                        <span class="icon">üÜï</span>
                        Nouvelle analyse
                    </button>
                    <button id="share-btn" class="btn btn-secondary">
                        <span class="icon">üì§</span>
                        Partager
                    </button>
                </div>
            </section>

            <!-- Section Manuel -->
            <section id="manual-section" class="card">
                <h2>Calcul manuel</h2>
                <p class="info-text">Vous pouvez aussi entrer vos scores manuellement:</p>
                <div id="manual-inputs">
                    <div class="score-input-group">
                        <label for="chateaux-score">Ch√¢teaux</label>
                        <input type="number" id="chateaux-score" min="0" value="0">
                    </div>
                    <div class="score-input-group">
                        <label for="jardins-score">Jardins</label>
                        <input type="number" id="jardins-score" min="0" value="0">
                    </div>
                    <div class="score-input-group">
                        <label for="tours-score">Tours</label>
                        <input type="number" id="tours-score" min="0" value="0">
                    </div>
                    <div class="score-input-group">
                        <label for="maisons-score">Maisons</label>
                        <input type="number" id="maisons-score" min="0" value="0">
                    </div>
                    <div class="score-input-group">
                        <label for="bonus-score">Bonus</label>
                        <input type="number" id="bonus-score" min="0" value="0">
                    </div>
                </div>
                <button id="calculate-manual-btn" class="btn btn-primary">
                    <span class="icon">üßÆ</span>
                    Calculer le score
                </button>
                <div id="manual-total" style="display: none;">
                    <span class="label">Score Total</span>
                    <span id="manual-score-value" class="value">0</span>
                </div>
            </section>
        </main>

        <footer>
            <p>Ch√¢teau Combo Score Calculator v1.0</p>
            <p class="offline-indicator" id="offline-indicator" style="display: none;">
                Mode hors-ligne
            </p>
        </footer>
    </div>

    <!-- Toast notifications -->
    <div id="toast" class="toast"></div>

    <!-- Install PWA prompt -->
    <div id="install-prompt" class="install-prompt" style="display: none;">
        <p>Installer l'application pour un acc√®s rapide</p>
        <button id="install-btn" class="btn btn-primary">Installer</button>
        <button id="dismiss-install" class="btn btn-text">Plus tard</button>
    </div>

    <script src="js/app.js" type="module"></script>
</body>
</html>
